# Klui 项目愿景与未来规划

**Created**: 2026-01-11
**Author**: Kosmo
**Purpose**: 记录项目起源、动机和未来发展方向

---

## 📖 项目起源

### 背景故事

**问题现状**：
- Letta 官方目前只支持自己的 AI 云服务
- 对第三方 AI 聚合平台的支持力度很小
- 作者花费数天时间尝试让 Letta 代理第三方 AI 平台
- 向 Letta 贡献了支持第三方的代码，但半个月未得到任何回应

**痛点**：
- Letta 官方的 ADE (Agent Development Environment) 难用
- Happy（slopus/happy）虽然解决了移动端问题，但依赖 Letta Code 包装层
- 缺少一个**简单、易用、支持第三方**的 Agent 管理界面

**解决方案**：
> **"所以我决定自己写一个"** 💓

创建 **Klui** - 一个移动优先的 Letta Web UI，支持：
- ✅ 第三方 AI 平台集成
- ✅ 移动端远程开发（iOS/Android）
- ✅ 完整的 Agent 管理功能
- ✅ 简化的配置和部署

---

## 🎯 核心定位

### 目标用户

**主要用户群体**：
1. **开发者** - 需要在移动端管理 Agent、远程开发
2. **AI 爱好者** - 想要使用第三方 AI 服务（不限于官方）
3. **企业用户** - 需要私有化部署 Agent 系统

**与竞品的差异化**：

| 特性 | Letta 官方 ADE | Happy | Klui |
|------|---------------|-------|------|
| **平台支持** | Web（简化版） | Mobile + Web | Mobile + Web + Desktop |
| **第三方 AI** | ❌ 仅官方 | ❌ 仅官方 | ✅ 支持 |
| **架构复杂度** | 中 | 高（3层） | 低（2层） |
| **远程开发** | ⚠️ 有限 | ✅ 支持 | ✅ 支持 |
| **Agent 管理** | 基础 | 通过 Letta Code | 完整 UI |
| **配置难度** | 中 | 高（需要 Letta Code） | 低（一键部署） |
| **开源性** | 开源 | 开源 | 开源 |

---

## 🚀 当前阶段

### Phase 0: 基础设施 ✅
- [x] 项目初始化（Flutter 3.38.5 + Riverpod 3.0.3）
- [x] 三层架构（UI → Provider → API）
- [x] Agent CRUD 功能
- [x] Provider CRUD 功能
- [x] Model 列表页面
- [x] Neo-Brutalist 设计风格

### Phase 1: 聊天功能 🚧
- [ ] SSE 流式响应
- [ ] 消息模型和 UI
- [ ] 工具批准系统
- [ ] 工具调用显示

**预计工作量**: 3-5 天

### Phase 2: 远程开发能力 ⏸️
- [ ] `run_code` 工具支持
- [ ] 文件操作（通过 Letta 后端）
- [ ] 终端输出显示
- [ ] 文件浏览器 UI

**预计工作量**: 3-5 天

### Phase 3: 高级功能 ⏸️
- [ ] 记忆管理 UI
- [ ] 高级工具配置
- [ ] 批量操作
- [ ] 导入/导出功能

---

## 🌟 长期愿景

### 愿景 1: Ketta - 简化的 Letta 后端分支

**动机**：
- Letta 官方对第三方支持力度小
- 需要简化用户和开发者配置条件
- 可以更好地适配 Klui 的功能需求

**计划**：
```yaml
项目名称: Ketta (Klui + Letta)
定位: 简化的 Letta 后端，专注于移动端和第三方支持

核心改进:
  1. 简化配置流程（一键启动脚本）
  2. 内置第三方 AI 提供商支持
  3. 优化移动端 API 响应
  4. 预配置常用工具和模板
  5. 改进的文档和示例

技术方向:
  - Fork 自 Letta 官方仓库
  - 移除不必要的复杂性
  - 增强第三方提供商集成
  - 优化移动端性能
```

**时机**：
- ✅ Klui 有活跃用户社区
- ✅ 有明确的用户需求反馈
- ✅ 有维护者投入时间

### 愿景 2: Klui 桌面版 - 一体化 AI 控制平台

**概念**：
> 将 Ketta 后端打包进 Klui 桌面端，实现真正的"开箱即用"

**架构**：
```
┌─────────────────────────────────────────┐
│         Klui Desktop App                │
│         (Flutter Desktop)                │
│  ┌──────────────┐  ┌─────────────────┐  │
│  │   移动端 UI   │  │   桌面端 UI      │  │
│  │ (iOS/Android) │  │ (Windows/macOS)  │  │
│  └──────────────┘  └─────────────────┘  │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │  内置 Ketta 后端（嵌入式）        │   │
│  │  - Agent 管理                   │   │
│  │  - 工具执行                     │   │
│  │  - 记忆系统                     │   │
│  │  - SSE 流式响应                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │  本地 AI 运行时（可选）          │   │
│  │  - Ollama (本地 LLM)            │   │
│  │  - LM Studio                   │   │
│  │  - LocalAI                     │   │
│  └─────────────────────────────────┘   │
└─────────────────────────────────────────┘
```

**特性**：
- ✅ 单文件安装（无需配置后端）
- ✅ 本地 LLM 支持（Ollama, LM Studio）
- ✅ 离线模式（完全本地运行）
- ✅ 数据加密存储
- ✅ 跨平台同步配置

**使用场景**：
1. **开发者笔记本** - 本地开发环境，无需联网
2. **企业内网** - 私有化部署，数据不出网
3. **教育场景** - 教学演示，一键启动
4. **个人用户** - 隐私保护，本地运行

**技术可行性**：
```yaml
Flutter Desktop:
  - ✅ 支持 Windows, macOS, Linux
  - ✅ 可以打包后台服务
  - ✅ 文件系统访问

后端嵌入:
  - ✅ 使用 Dart 的 `Isolate` 运行 Python 进程
  - ✅ 或编译 Python 为可执行文件
  - ✅ 通过本地 HTTP 通信

本地 LLM:
  - ✅ Ollama 提供 HTTP API
  - ✅ 可以集成多个 LLM 提供商
  - ✅ 支持模型切换
```

### 愿景 3: 社区和生态系统

**开放策略**：
```yaml
文档:
  - 详细的部署指南
  - 第三方 AI 配置教程
  - API 使用示例
  - 视频教程

插件系统:
  - 自定义工具插件
  - UI 主题插件
  - LLM 提供商插件
  - 工作流模板

社区贡献:
  - 工具市场（分享自定义工具）
  - Agent 模板库
  - 配置分享平台
```

---

## 💡 产品理念

### 设计哲学

**1. 简单胜于复杂**
> "Make it work, make it right, make it simple." - Kent Beck

- ✅ 一键部署（不需要复杂的配置）
- ✅ 清晰的 UI（不需要学习成本）
- ✅ 合理的默认值（不需要频繁调整）

**2. 移动优先**
> "The future of computing is mobile."

- ✅ 首先考虑移动端体验
- ✅ 触摸友好的交互设计
- ✅ 离线能力（本地缓存）
- ✅ 弱网优化

**3. 开放和可扩展**
> "Users should control their own AI."

- ✅ 支持任意 LLM 提供商
- ✅ 支持自定义工具
- ✅ 开源所有代码
- ✅ 欢迎社区贡献

**4. 隐私和安全**
> "Your data, your control."

- ✅ 本地优先（数据可以不上传）
- ✅ 端到端加密（如果需要同步）
- ✅ 透明的权限控制
- ✅ 可审计的操作日志

---

## 🎊 里程碑

### 短期目标（1-3 个月）
- ✅ 基础 Agent 管理
- 🚧 聊天功能完成
- ⏸️ 远程开发能力
- ⏸️ 第一个稳定版本发布

### 中期目标（3-6 个月）
- ⏸️ 桌面端适配
- ⏸️ Ketta 后端分支（如果有需求）
- ⏸️ 本地 LLM 支持
- ⏸️ 社区建立

### 长期目标（6-12 个月）
- ⏸️ 插件系统
- ⏸️ 工具市场
- ⏸️ 企业版功能
- ⏸️ 国际化支持

---

## 🤝 贡献和维护

### 当前维护策略
- **主项目 (Klui)**: 作者积极维护
- **Ketta 分支**: 看用户需求（未来考虑）
- **文档**: 持续更新

### 社区参与
当有用户使用时：
1. 建立 GitHub Discussions
2. 创建 Roadmap（公开的 TODO）
3. 欢迎 Pull Request
4. 定期发布 Release

### 商业化考虑
**当前**: 纯开源项目，非商业

**未来可能性**（如果有需求）：
- ☕ 付费支持服务（企业支持）
- 🎨 付费高级主题（UI 美化）
- 🏢 企业版功能（SSO、审计日志）
- 📦 托管服务（SaaS 版本）

**承诺**：
- ✅ 核心功能永远开源
- ✅ 不限制第三方 AI 使用
- ✅ 不收集用户数据
- ✅ 社区驱动开发

---

## 📝 总结

**Klui 的本质**：
> 一个**为了解决自己需求**而创建的工具，恰好也能帮助到其他人

**核心价值**：
1. ✅ **简单** - 不需要复杂配置
2. ✅ **开放** - 支持任意 AI 提供商
3. ✅ **移动** - 随时随地管理 Agent
4. ✅ **自由** - 完全开源，可定制

**最终愿景**：
> 让每个人都能轻松使用 AI Agent，不受官方限制，不受平台束缚。

---

**"如果你想要的东西不存在，那就自己造一个。"** - Kosmo, 2026-01-11

---

## 🔗 相关文档

- [实施路线图](IMPLEMENTATION_ROADMAP.md) - 详细的技术实现计划
- [Freezed 迁移指南](FREEZED_MIGRATION_GUIDE.md) - 代码生成工具使用
- [远程开发方案对比](REMOTE_DEV_COMPARISON.md) - 架构决策记录
- [Letta 后端分析](LETTA_BACKEND_ANALYSIS.md) - 后端能力研究

---

**最后更新**: 2026-01-11
**状态**: Vision Document 🌟
**下一步**: Phase 1 - 聊天功能实现
